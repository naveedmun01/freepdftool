<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PDF Editor - Free PDF Tool Pro</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <h1>PDF Editor</h1>
    </div>
    <nav class="nav">
      <a href="index.html">üè† Home</a>
    </nav>
  </header>

  <main class="container">
    <section class="card">
      <h2>Edit PDF (Add Text)</h2>
      <p>Upload a PDF, enter text, and download the edited version.</p>
      <input type="file" id="pdfUpload" accept="application/pdf"><br><br>
      <input type="text" id="editText" placeholder="Enter text to add">
      <button id="btnEdit">Add Text & Download</button>
      <p id="editorMsg" class="muted"></p>
    </section>
  </main>

  <footer class="footer">¬© <span id="year"></span> Mun Developers</footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    document.getElementById("btnEdit").addEventListener("click", async () => {
      const fileInput = document.getElementById("pdfUpload");
      const text = document.getElementById("editText").value;
      const msg = document.getElementById("editorMsg");

      if (!fileInput.files.length || !text) {
        msg.textContent = "Please select a PDF and enter text.";
        return;
      }

      const file = fileInput.files[0];
      const arrayBuffer = await file.arrayBuffer();
      const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);

      const pages = pdfDoc.getPages();
      const firstPage = pages[0];
      firstPage.drawText(text, {
        x: 50,
        y: 700,
        size: 24,
        color: PDFLib.rgb(0, 0.53, 0.71),
      });

      const pdfBytes = await pdfDoc.save();
      const blob = new Blob([pdfBytes], { type: "application/pdf" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "edited.pdf";
      a.click();

      msg.textContent = "Text added successfully!";
    });
  </script>
</body>
</html>
